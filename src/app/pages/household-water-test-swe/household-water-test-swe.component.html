<h2 class="content-block">Household Water test SWE</h2>
<div style="padding-left: 3%;padding-right: 3%;">
    <dx-data-grid id="gridContainer"
        class="dx-card wide-card"
        [dataSource]="householdWaterTestsSWE"
        [remoteOperations]="false"
        [allowColumnReordering]="true"
        [rowAlternationEnabled]="true"
        [showBorders]="true"
        [columnAutoWidth]="true"
        [allowColumnResizing]="true"
        [showColumnLines]="true"
        height='calc(100vh - 150px)'
        (onRowRemoving)="removingRow($event)"
        (onRowRemoved)="removedRow($event)"
        (onRowInserting)="addingRow($event)">
        <dxo-editing
            [allowUpdating]="false"
            [allowAdding]="true"
            [allowDeleting]="true"
            [confirmDelete]="true"
            mode="popup"> <!-- 'row'| 'batch' | 'cell' | 'form' | 'popup' -->
            <dxo-popup
                title="Household Water Test"
                [showTitle]="true"
                [width]="750"
                [height]="525"
            >
            </dxo-popup>

            <dxo-form
                [colCount]="3"
                >
                <dxi-item                     
                    dataField="Country"
                    [colCount]="1"
                    editorType="dxSelectBox"
                    [editorOptions]="{ items: countries, searchEnabled: true, value: '', onValueChanged: setCountryAndResetCommunities }"
                    >
                    <dxi-validation-rule type="required" message="Country is required">
                    </dxi-validation-rule>
                </dxi-item>
                <dxi-item 
                    dataField="Community"
                    [colCount]="1"
                    editorType="dxSelectBox"
                    [editorOptions]="{ items: communities, searchEnabled: true, value: '', onFocusIn: redrawCommunities }"
                    >
                    <dxi-validation-rule type="required" message="Community is required">
                    </dxi-validation-rule>
                </dxi-item>
                <dxi-item
                    dataField="date"
                    [colCount]="1"
                    editorType="dxDateBox"
                    >
                    <dxi-validation-rule type="required" message="date is required">
                    </dxi-validation-rule>
                </dxi-item>
                <dxi-item 
                    dataField="HeadHouseholdName"
                    [colCount]="3"
                    [colSpan] = "3"
                    editorType="dxSelectBox"
                    [editorOptions]="{ items: headHouseholdNames, searchEnabled: true, value: '' }"
                    >
                    <dxi-validation-rule type="required" message="Head of household name is required">
                    </dxi-validation-rule>
                </dxi-item>
                <dxi-item
                    itemType="group"
                    caption="Colilert"
                    [colCount]="3"
                    [colSpan] = "3"
                    >
                    <dxi-item dataField="ColilertDateTested">
                        <dxi-validation-rule type="required" message="Colilert date tested is required">
                        </dxi-validation-rule>
                    </dxi-item>
                    <dxi-item dataField="ColilertDateRead">
                        <dxi-validation-rule type="required" message="Colilert date read is required">
                        </dxi-validation-rule>
                    </dxi-item>
                    <dxi-item 
                        dataField="ColilertTestResult"
                        editorType="dxSelectBox"
                        [editorOptions]="{ items: colilertTestResults, displayExpr:'desc', valueExpr:'value', searchEnabled: true, value: ''}"
                        >
                        <dxi-validation-rule type="required" message="Colilert test result is required">
                        </dxi-validation-rule>
                    </dxi-item>
                </dxi-item>
                <dxi-item
                    itemType="group"
                    caption="Petrifilm"
                    [colCount]="3"
                    [colSpan] = "3"
                    >
                    <dxi-item dataField="PetrifilmDateTested">
                        <dxi-validation-rule type="required" message="Petrifilm date tested is required">
                        </dxi-validation-rule>
                    </dxi-item>
                    <dxi-item dataField="PetrifilmDateRead">
                        <dxi-validation-rule type="required" message="Petrifilm date read is required">
                        </dxi-validation-rule>
                    </dxi-item>
                    <dxi-item 
                        dataField="PetrifilmTestResult"
                        editorType="dxSelectBox"
                        [editorOptions]="{ items: petrifilmTestResults, displayExpr:'desc', valueExpr:'value', searchEnabled: true, value: ''}"
                        >
                        <dxi-validation-rule type="required" message="Petrifilm test result is required">
                        </dxi-validation-rule>
                    </dxi-item>
                </dxi-item>
                <dxi-item
                    itemType="group"
                    caption="Chlorine"
                    [colCount]="2"
                    [colSpan] = "2"
                    >
                    <dxi-item dataField="ChlorineDateTested">
                        <dxi-validation-rule type="required" message="Chlorine date tested is required">
                        </dxi-validation-rule>
                    </dxi-item>
                    <dxi-item 
                        dataField="ChlorineTestResult"
                        editorType="dxSelectBox"
                        [editorOptions]="{ items: chlorineTestResults, displayExpr:'desc', valueExpr:'value', searchEnabled: true, value: ''}"
                        >
                        <dxi-validation-rule type="required" message="Chlorine test results is required">
                        </dxi-validation-rule>
                    </dxi-item>
                </dxi-item>
            </dxo-form>
        </dxo-editing>

        <dxo-load-panel
            [enabled]="true"
            [height]="100"
            [width]="250">
        </dxo-load-panel>

        <dxo-column-fixing [enabled]="true"></dxo-column-fixing>

        <dxo-paging [pageSize]="10"></dxo-paging>
        <dxo-pager
            [showPageSizeSelector]="true"
            [allowedPageSizes]="[10, 50, 100]"
        ></dxo-pager>

        <dxo-group-panel
            [visible]="true"
        ></dxo-group-panel>
        <dxo-grouping
            [autoExpandAll]="false"
        ></dxo-grouping>

        <dxo-filter-panel [visible]="true"></dxo-filter-panel>
        <dxo-filter-row [visible]="true"></dxo-filter-row>
        <dxo-selection        
            mode="multiple"
        ></dxo-selection>

        <dxo-export [enabled]="true" [allowExportSelectedData]="true" fileName="HouseholdWaterTestSWE"></dxo-export>
        
        <dxo-search-panel
            [visible]="true"
            [highlightCaseSensitive]="true"
        ></dxo-search-panel>    
        

        <dxi-column dataField="id" dataType="string" ></dxi-column>
        <dxi-column dataField="FullNameSwe" dataType="string" caption="SWE fullname" ></dxi-column>
        <dxi-column dataField="Namebwe" dataType="string" caption="Email BWE"></dxi-column>
        <dxi-column dataField="Country" dataType="string"></dxi-column>
        <dxi-column dataField="Community" dataType="string"></dxi-column>
        <dxi-column dataField="date" dataType="date" format="shortDate"></dxi-column>
        <dxi-column dataField="HeadHouseholdName" dataType="string"></dxi-column>
        <dxi-column dataField="ColilertDateTested" dataType="date" ></dxi-column>
        <dxi-column dataField="ColilertDateRead" dataType="date" ></dxi-column>
        <dxi-column dataField="ColilertTestResult" dataType="string" [calculateDisplayValue]="getColilertTestResultDescription"></dxi-column>
        <dxi-column dataField="PetrifilmDateTested" dataType="date" ></dxi-column>
        <dxi-column dataField="PetrifilmDateRead" dataType="date" ></dxi-column>
        <dxi-column dataField="PetrifilmTestResult" dataType="string" [calculateDisplayValue]="getPetrifilmTestResultDescription"></dxi-column>
        <dxi-column dataField="ChlorineDateTested" dataType="date" ></dxi-column>
        <dxi-column dataField="ChlorineTestResult" dataType="string" ></dxi-column>        
        <dxi-column dataField="Completed" dataType="number" ></dxi-column>
        <dxi-column dataField="Lat" dataType="string" caption="Latitude"></dxi-column>
        <dxi-column dataField="Lng" dataType="string" caption="Longitude"></dxi-column>   
            
        <dxo-summary>
            <dxi-total-item
                column="id"
                summaryType="count">
            </dxi-total-item>
            
        </dxo-summary>
        
    </dx-data-grid>

</div>
